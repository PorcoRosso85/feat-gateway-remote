# Phase-M1+M2+M4 完了（apps + devShell + smoke tests）

## 日時
2026-01-02

## 完了内容

### M1: apps 追加
```nix
apps.${system} = {
  gw-help = { type = "app"; program = "..."; };
  gw-doctor = { type = "app"; program = "..."; };
  gw-pick = { type = "app"; program = "..."; };
  gw-ssh = { type = "app"; program = "..."; };
  gw-status = { type = "app"; program = "..."; };
};
```

### M2: devShell 整備
```nix
devShells.${system}.default = pkgs.mkShell {
  packages = [ fzf openssh zmx ];
  shellHook = ''export PATH="${package}/bin:$PATH"'';
};
```

### M4: smoke tests 追加
```nix
checks.${system} = {
  apps-wireup = runCommand "apps-wireup" { } ''test -x ${apps.*.program}...'';
  devshell-smoke = runCommand "devshell-smoke" { nativeBuildInputs = [...] } ''...'';
};
```

## 動作確認

| 導線 | コマンド | 結果 |
|------|---------|------|
| nix run | `nix run .#gw-status` | ✅ contracted command: gw-status |
| nix develop | `nix develop .# && gw-doctor check-tools` | ✅ All required tools available |
| packages | `nix build .#packages...` | ✅ gateway-remote-0.1.0 |

## コミット
- `478b31d` feat: add apps for nix run + devShell with dependencies + smoke tests
